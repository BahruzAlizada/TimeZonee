@model Product

<div class="row">

    <div class="col-12">
        <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Məhsul</h5>
            </div>
            <div class="card-body">
                <form method="post" enctype="multipart/form-data">

                    <div style="display:flex;">
                        @if (Model.ProductImages.Count != 1)
                        {
                            foreach (var img in Model.ProductImages)
                            {
                                <div style="padding:7px; width:125px;">
                                    <img style="height:125px;width:125px;" src="~/assets/img/product/@img.Image" />
                                    <a style="display:block;" class="btn btn-outline-danger del-images">Sil</a>
                                    <input type="hidden" value="@img.Id">
                                </div>
                            }
                        }
                        else
                        {
                            foreach (var img in Model.ProductImages)
                            {
                                <div style="padding:7px; width:125px;">
                                    <img style="height:125px;width:125px;" src="~/assets/img/product/@img.Image" />
                                </div>
                            }
                        }

                    </div>

                    <div class="mb-3 form-group">
                        <label asp-for="Photos" class="form-label">Şəkil</label>
                        <input asp-for="Photos" class="form-control" />
                        <span asp-validation-for="Photos" class="text-danger"></span>
                    </div>

                    <div class="mb-3 form-group">
                        <label asp-for="Name" class="form-label">Məhsulun adı</label>
                        <input asp-for="Name" class="form-control" />
                        <span asp-validation-for="Name" class="text-danger"></span>
                    </div>

                    <div class="mb-3 form-group">
                        <label asp-for="Price" class="form-label">Məhsulun qiyməti</label>
                        <input asp-for="Price" class="form-control" />
                        <span asp-validation-for="Price" class="text-danger"></span>
                    </div>

                    <div class="mb-3 form-group">
                        <label asp-for="Quantity" class="form-label">Məhsulun sayı</label>
                        <input asp-for="Quantity" class="form-control" />
                        <span asp-validation-for="Quantity" class="text-danger"></span>
                    </div>

                    <div class="mb-3 form-group">
                        <label asp-for="IsMan" class="form-label">Kişi üçün</label>
                        <input asp-for="IsMan" value="true" type="radio" />

                        <label asp-for="IsMan" class="form-label">Qadın üçün</label>
                        <input asp-for="IsMan" value="false" type="radio" />
                    </div>

                    <div class="mb-3 form-group">
                        <label asp-for="IsDelivery" class="form-label">Çatdırılma var</label>
                        <input asp-for="IsDelivery" value="true" type="radio" />

                        <label asp-for="IsDelivery" class="form-label">Çatdırılma yoxdur</label>
                        <input asp-for="IsDelivery" value="false" type="radio" />
                    </div>

                    <div class="mb-3 form-group">
                        <label asp-for="IsStock" class="form-label">Stokda var</label>
                        <input asp-for="IsStock" value="true" type="radio" />

                        <label asp-for="IsStock" class="form-label">Stokda yoxdur</label>
                        <input asp-for="IsStock" value="false" type="radio" />
                    </div>

                    <div class="form-group my-4">
                        <label>Kateqoriyanı seç</label>
                        <select class="form-control" name="catId">
                            @foreach (Category category in ViewBag.Categories)
                                if (Model.CategoryId == category.Id)
                                {
                                    <option selected value="@category.Id">@category.Name</option>
                                }
                               else
                                {
                                    <option value="@category.Id">@category.Name</option>
                                }
                        </select>
                    </div>

                    <button type="submit" class="btn btn-primary">Yarat</button>
                    <a asp-action="Index" class="btn btn-secondary">Geri qayıt</a>
                </form>
            </div>
        </div>
    </div>
   
</div>

@section Scripts{
    <script>
        $(document).on('click',' .del-images',function () {
            let clickedBtn = $(this)
            $.ajax({
                url: "/Admin/Product/DeleteImage/",
                type: "get",
                data:{
                    "proImageId" : clickedBtn.next().val()
                },
                success: function(res) {
                    clickedBtn.parent().remove()
                    if(res==1){
                        $(". del-images").next().remove();
                         $(". del-images").remove();
                    }
                }
            })
        } )
    </script>
}